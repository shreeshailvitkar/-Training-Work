(self.webpackChunklite=self.webpackChunklite||[]).push([[32677],{54522:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var r=t(67294);function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var a=r.createElement("path",{d:"M7 .5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zM6 9a.5.5 0 1 1-1 0V5a.5.5 0 1 1 1 0v4zm3 0a.5.5 0 1 1-1 0V5a.5.5 0 1 1 1 0v4z",fill:"#292929"});const o=function(e){return r.createElement("svg",i({width:20,height:20,viewBox:"0 0 14 14",fill:"none"},e),a)}},39378:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var r=t(67294);function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var a=r.createElement("path",{d:"M7 .5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zm2.28 6.92l-3 2A.5.5 0 0 1 5.5 9V5a.5.5 0 0 1 .78-.42l3 2a.5.5 0 0 1 0 .84z",fill:"#292929"});const o=function(e){return r.createElement("svg",i({width:20,height:20,viewBox:"0 0 14 14",fill:"none"},e),a)}},30570:(e,n,t)=>{"use strict";t.d(n,{sK:()=>f,L0:()=>V});var r=t(28655),i=t.n(r),a=t(63038),o=t.n(a),l=t(71439),s=t(67294),u=t(73788),c=t(11615);function d(){var e=i()(["\n  fragment InlineExpansionContext_post on Post {\n    id\n    creator {\n      id\n      customStyleSheet {\n        id\n        blogroll {\n          visibility\n        }\n      }\n      isAuroraVisible\n      followedCollections\n      socialStats {\n        followingCount\n        collectionFollowingCount\n      }\n      ...UserSubscribeButton_user\n    }\n    collection {\n      id\n      canToggleEmail\n      description\n      isAuroraEligible\n      isAuroraVisible\n      viewerEdge {\n        id\n        isEditor\n      }\n      tagline\n    }\n    customStyleSheet {\n      id\n      blogroll {\n        visibility\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p=s.createContext({expandedPostId:null,setExpandedPostId:function(){},postInView:!1,setPostInView:function(){},expandedPost:null,setExpandedPost:function(){},clearExpandedState:function(){}}),f=function(){return s.useContext(p)},V=function(e){var n=e.children,t=s.useState(null),r=o()(t,2),i=r[0],a=r[1],l=s.useState(!1),c=o()(l,2),d=c[0],f=c[1],V=s.useState(null),m=o()(V,2),g=m[0],h=m[1];return s.createElement(p.Provider,{value:{expandedPostId:i,setExpandedPostId:a,postInView:d,setPostInView:f,expandedPost:g,setExpandedPost:h,clearExpandedState:function(){h(null),a(null),f(!1)}}},s.createElement(u.k,{post:g,preload:!0},n))};(0,l.Ps)(d(),c.w)},27944:(e,n,t)=>{"use strict";t.d(n,{rz:()=>d,Fm:()=>c,ik:()=>p});var r=t(319),i=t.n(r),a=t(31506),o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ParagraphStyleGrouping_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodyParagraph_highlight"}}]}}].concat(i()(a.Jj.definitions))},l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ParagraphStyleGrouping_privateNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodyParagraph_privateNote"}}]}}].concat(i()(a._V.definitions))},s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ParagraphLayoutGrouping_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ParagraphStyleGrouping_highlight"}}]}}].concat(i()(o.definitions))},u={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ParagraphLayoutGrouping_privateNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ParagraphStyleGrouping_privateNote"}}]}}].concat(i()(l.definitions))},c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodySection_paragraph"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Paragraph"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodyParagraph_paragraph"}}]}}].concat(i()(a.tD.definitions))},d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodySection_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ParagraphLayoutGrouping_highlight"}}]}}].concat(i()(s.definitions))},p={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodySection_privateNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ParagraphLayoutGrouping_privateNote"}}]}}].concat(i()(u.definitions))}},56308:(e,n,t)=>{"use strict";t.d(n,{b:()=>D});var r=t(59713),i=t.n(r),a=t(67294),o=t(28859),l=t(10515),s=t(319),u=t.n(s),c=t(28655),d=t.n(c),p=t(71439),f=t(7647),V=t(95145),m=t(30027),g=t(6688),h=t(14391),v=t(65441);function b(){var e=d()(["\n  fragment ParagraphLayoutGrouping_privateNote on Note {\n    ...ParagraphStyleGrouping_privateNote\n  }\n  ","\n"]);return b=function(){return e},e}function y(){var e=d()(["\n  fragment ParagraphLayoutGrouping_highlight on Quote {\n    ...ParagraphStyleGrouping_highlight\n  }\n  ","\n"]);return y=function(){return e},e}function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach((function(n){i()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var S={clear:"both"},P={clear:"both",width:"100%"},x=function(e){var n,t,r=e.layoutGroup,i=e.postBodyInserts,o=e.isEmbedded,l=(0,g.I)(),s=r.styleGroups[0].paragraphViewModels[0].richTextStyle,u=r.styleGroups.map((function(e,n){var t=a.createElement(V.ZQ,{key:n,styleGroup:e,postBodyInserts:i,richTextStyle:s});return"FULL_PAGE"===s&&n<3||"INLINE"===s?a.createElement(f.R,{key:n},t):t}));if((0,v.jH)(s)||o||"INLINE"===s)return a.createElement(a.Fragment,null,u);switch(r.effectiveLayout){case"OUTSET_CENTER":case"OUTSET_ROW":return a.createElement("div",{className:l(S)},a.createElement(m.P,{size:{xs:"full",sm:"full",md:"full",lg:"outset",xl:"outset"}},u));case"FULL_WIDTH":return a.createElement("div",{className:l(P)},u);default:return"FULL_PAGE"===s?a.createElement(m.P,{size:"inset"},u):a.createElement("div",{className:l((n=r.effectiveLayout,t={boxSizing:"border-box",margin:"0 auto",width:"100%"},"INSET_CENTER"===n?E(E({},t),{},{maxWidth:"700px",padding:"0 1.25em"}):t))},u)}},w=a.memo(x),N=((0,p.Ps)(y(),V.PL),(0,p.Ps)(b(),V.NR),function(e,n){switch(n){case h.ms.INSET_LEFT:case h.ms.OUTSET_LEFT:return"IMG"===e||"IFRAME"===e?h.ms.INSET_CENTER:n;case h.ms.OUTSET_ROW_CONTINUE:return h.ms.OUTSET_ROW;default:return n||h.ms.INSET_CENTER}}),A=t(1072),T=t(77180),I=t(80637),O={":after":{display:"block",content:'""',clear:"both"}},R=t(90038),_=t(534);function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){i()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var F=function(){return{display:"table-cell",paddingBottom:"32px",verticalAlign:"bottom"}};function L(e){var n,t,r,i,l=e.bgImage,s=e.children,u=e.isFullPage,c=e.paragraphName,d=(0,g.I)(),p=(0,T.F)();return l&&l.id&&u?a.createElement(o.TA,{name:c,type:"bgimage"},a.createElement("div",{className:d((n=l,t=n.id,r=n.originalWidth,i=n.originalHeight,function(){var e=[400,600,800,1e3,1200,1400,1600,1800,2e3],n={miroId:t,strategy:R._S.Resample,verticalGradient:{start:29,end:81,opacity:40}},a=e.reduce((function(t,a,o){var l=(0,R.W6)(B(B({},n),{},{width:a,height:a/r*i}));return o===e.length-1?(t.backgroundImage="url(".concat(l,")"),t):(t["@media (min-width: ".concat(a,"px)")]={backgroundImage:"url(".concat(l,")")},t)}),{});return B({backgroundColor:"rgba(0, 0, 0, 0.9)",backgroundPosition:"50% 50%",backgroundSize:"cover",display:"table",minHeight:"100vh",width:"100%"},a)}))},a.createElement("div",{className:d(F)},a.createElement(A.f,{theme:(0,_.GV)(p)},s)))):s}var D=function(e){var n=e.paragraphViewModels,t=e.postBodyInserts,r=e.section,o=a.useContext(l.M),s=(0,g.I)();if(0===n.length)return null;var c,d=function(e){var n=[],t=[];e.forEach((function(e){var r=N(e.paragraphStyle,e.paragraph.layout),i=n[n.length-1];if(i&&i.effectiveLayout===r)t.push(e);else{if(i){var a,o=(0,V.lD)(t);(a=i.styleGroups).push.apply(a,u()(o))}t.length=0,t.push(e),n.push({styleGroups:[],effectiveLayout:r})}}));var r=n[n.length-1];if(r){var i,a=(0,V.lD)(t);(i=r.styleGroups).push.apply(i,u()(a))}return n}(n),p=(c=n[0].richTextStyle,function(e){switch(c){case"SERIES":return{paddingTop:"32px",paddingBottom:"32px",margin:"auto 0",width:"100%"};case"STREAM":case"CARD":case"FULL_PAGE":case"INLINE":return{wordBreak:"break-word",wordWrap:"break-word"};case"SHORTFORM_CARD":return i()({wordBreak:"break-word",wordWrap:"break-word",position:"relative",overflow:"hidden",height:"340px"},I.md(e),{height:"218px"});default:return{}}});return a.createElement("section",{className:s([p,O])},a.createElement(L,{bgImage:r.backgroundImage,isFullPage:"FULL_PAGE"===n[0].richTextStyle,paragraphName:n[0].paragraph.name},d.map((function(e,n){return a.createElement(w,{key:n,layoutGroup:e,postBodyInserts:t,isEmbedded:o})}))))}},49486:(e,n,t)=>{"use strict";t.d(n,{Q:()=>r});var r=t(67294).createContext({openSidebarToRespondToHighlight:function(){return null}})},32677:(e,n,t)=>{"use strict";t.d(n,{yO:()=>Re,Pk:()=>_e,v:()=>Be,XV:()=>Ce,w6:()=>Fe});var r=t(28655),i=t.n(r),a=t(67154),o=t.n(a),l=t(319),s=t.n(l),u=t(71439),c=t(67294),d=t(28859),p=t(6688),f={display:"flex",justifyContent:"center",marginTop:"32px",marginBottom:"14px",paddingTop:"24px",paddingBottom:"10px"},V=function(e){return{backgroundColor:e.baseColor.text.darker,borderRadius:"50%",display:"inline-block",height:"3px",width:"3px"}},m={marginRight:"20px"};function g(){var e=(0,p.I)();return c.createElement("div",{className:e(f),role:"separator"},c.createElement("span",{className:e([V,m])}),c.createElement("span",{className:e([V,m])}),c.createElement("span",{className:e(V)}))}var h=t(56308),v=t(27944),b=t(63038),y=t.n(b),k=t(50008),E=t.n(k),S=t(23450),P=t.n(S),x=t(98281),w=t(16831),N=t(42933),A=t(86021),T=t(77180),I=t(27108);function O(){var e=i()(["\n  fragment PostNotesDetails_user on User {\n    id\n    imageId\n    name\n    username\n    ...UserAvatar_user\n  }\n  ","\n"]);return O=function(){return e},e}function R(e){var n=e.grid.xStep;return{padding:"".concat(3*n,"px ").concat(4*n,"px ").concat(3*n,"px"),width:"400px"}}function _(e){var n=e.close,t=e.users,r=(0,p.I)(),i=c.useRef(null),a=(0,T.F)(),o=a.grid.xStep;return c.useEffect((function(){function e(){var e=i.current;if(e&&e.getBoundingClientRect){var t=e.getBoundingClientRect(),r=t.bottom,o=t.top<0||r>window.innerHeight,l=window.innerWidth<a.breakpoints.xl;(o||l)&&n()}}return I.V6.on("scroll_end",e),I.V6.on("resize_throttled",e),function(){I.V6.off("scroll_end",e),I.V6.off("resize_throttled",e)}}),[]),c.createElement("section",{ref:i,className:r(R)},c.createElement(N.x,{borderBottom:"BASE_LIGHTER",marginBottom:"-".concat(o,"px"),paddingBottom:"".concat(2*o,"px")},c.createElement(A.Lh,null,"Highlights (".concat(t.length,")"))),c.createElement(N.x,{marginLeft:"3px"},t.length&&t.map((function(e){return c.createElement(N.x,{display:"inline-block",key:e.id,marginTop:"".concat(5*o,"px"),marginRight:"".concat(5*o,"px"),width:"".concat(8*o,"px")},c.createElement(x.Yt,{hasPopover:!0,link:!0,user:e,scale:"XS"}))}))))}var C=c.memo(_),B=(0,u.Ps)(O(),w.W),F=t(91442),L=t(16803),D=t(93340),M=t(89423),j=t(32589),G=t(19464),z=t(98024),U=t(24438),W=t(11642);function H(){var e=i()(["\n  fragment PostNotesMarkers_creator on User {\n    id\n    name\n  }\n"]);return H=function(){return e},e}function Q(){var e=i()(["\n  fragment PostNotesMarkers_highlight on Quote {\n    id\n    endOffset\n    paragraphs {\n      id\n      name\n    }\n    startOffset\n    userId\n    user {\n      id\n      name\n      ...PostNotesDetails_user\n    }\n  }\n  ","\n"]);return Q=function(){return e},e}function Y(){return{border:"none",cursor:"pointer",display:"block",padding:"0px",textAlign:"left",width:"100%"}}function Z(){return{left:"100%",position:"absolute",top:0}}function X(e,n){return{marginTop:"6px",maxWidth:"100%",position:"absolute",top:"".concat(e-(n||0),"px"),whiteSpace:"nowrap",width:"100%"}}function K(e){return{marginLeft:"auto",marginRight:"auto",maxWidth:"".concat((0,U.G)(e,8,!0),"px"),position:"relative"}}function J(){return{display:"inline-block",maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}function q(e,n){return"number"==typeof e.startOffset&&"number"==typeof n.startOffset?e.startOffset<n.startOffset?-1:1:-1}function $(e,n){var t=n.startOffset,r=n.endOffset,i=n.paragraphs[0].name;if(!i||"number"!=typeof t||"number"!=typeof r)return e;var a=!1,o=e[i]||[];return o.length&&(o=o.map((function(e){var i=t<=e.endOffset+1,o=e.startOffset,l=e.endOffset;return i&&(a=!0,e.highlights.push(n),l=Math.max(r,e.endOffset),o=Math.min(t,e.startOffset)),{highlights:e.highlights,endOffset:l,startOffset:o}}))),a||o.push({highlights:[n],endOffset:r,startOffset:t}),e[i]=o,e}function ee(e){var n=e.children,t=e.highlightString,r=e.toggle,i=(0,p.I)();return"Top highlight"===t?c.createElement(c.Fragment,null,n):c.createElement("button",{className:i(Y),onClick:function(){return r()},onMouseDown:function(e){return e.preventDefault()}},n)}function ne(e){var n=e.creator,t=e.positionMap,r=e.yPosOffset,i=e.viewerEdge,a=(0,p.I)();if("number"!=typeof r)return null;var o=Array.from(t.entries());return c.createElement(M.I,{nonBlocking:!0},(function(e){return c.createElement(c.Fragment,null,o.map((function(t,o){var l=y()(t,2),s=l[0],u=l[1],d=function(e,n,t,r){var i=null==r?void 0:r.isFollowing;if(1===e.length){if("anon"===e[0].userId)return"Top highlight";if(!n)return null;if(t&&t.id===e[0].userId&&n.id!==t.id&&!i)return null;if(n&&n.id===e[0].userId)return"You highlighted";if(e[0].user&&e[0].user.name)return e[0].user.name}var a=[];if(e.forEach((function(e){if(e.user){var r=n&&n.id===e.userId,o=e.user.name,l=t&&t.id===e.userId&&(!n||n.id!==t.id&&!i);r?a.length&&"You"===a[0]||a.unshift("You"):l||!o||a.includes(o)||a.push(o)}})),!a.length)return"Top highlight";if(1===a.length)return"You"===a[0]?"You highlighted":a[0];if(2===a.length)return"".concat(a[0]," and ").concat(a[1]);var o=a.slice(0,2),l=a.length-o.length;return"".concat(o[0],", ").concat(o[1],", and ").concat(l," ").concat(P()("other",l))}(u,e,n,i);return d?c.createElement("div",{className:a(X(s,r)),key:o},c.createElement(G.B,null,(function(e){var n=e.isVisible,t=e.hide,r=e.toggle;return c.createElement(c.Fragment,null,c.createElement(ee,{toggle:r,highlightString:d},c.createElement(z.F,{scale:"S"},c.createElement("span",{className:a(J)},d))),n&&c.createElement(L.G,{boundariesElement:"document",isVisible:!0,hide:t,placement:"right",popoverRenderFn:function(){var e=new Set,n=u.map((function(n){var t=n.user;return t&&t.id&&!e.has(t.id)?(e.add(t.id),t):null})).filter(W.b);return c.createElement(C,{close:t,users:n})}},c.createElement(c.Fragment,null)))}))):null})))}))}var te=c.forwardRef((function(e,n){var t=e.creator,r=e.highlights,i=c.useContext(F.Vc).highlightSegments,a=c.useRef(null),o=c.useState(null),l=y()(o,2),u=l[0],d=l[1],f=(0,p.I)(),V=(0,T.F)(),m=c.useState(null),g=y()(m,2),h=g[0],v=g[1],b=c.useState(null),k=y()(b,2),S=k[0],P=k[1],x=(0,j.Pd)(t).viewerEdge;return c.useEffect((function(){var e=function(){var e=function(e,n,t){var r=new Map;if(e.size&&n.length){var i=function(e){var n=s()(e).sort(q).reduce($,{});return Object.values(n).reduce((function(e,n){return n&&"object"===E()(n)&&n.length?(e.push.apply(e,s()(n)),e):e}),[])}(n),a=[];i.forEach((function(n){var i=n.highlights[0],o=i.paragraphs[0].name;if(i&&"number"==typeof i.startOffset&&o){var l=e.get("".concat(o,"_").concat(i.startOffset));if(l&&l.ref&&l.ref.current){var s,u=l.ref.current.getBoundingClientRect().top+window.pageYOffset;a.length&&(s=a.find((function(e){return u<e+t.newFonts.body.lineHeight.M&&u>e||u>e-t.newFonts.body.lineHeight.M&&u<e})));var c=s||u,d=r.get(c)||[];d.length||a.push(c);var p=d.concat(n.highlights);p.length&&r.set(c,p)}}}))}return r}(i,r,V);if(d(e),"function"!=typeof n&&null!=n&&n.current&&P(n.current.offsetTop),null!=a&&a.current){var t=a.current.getBoundingClientRect().left,o=window.innerWidth-t-8*V.grid.xStep;v(o)}};I.V6.on("resize_throttled",e);var t=(0,D.x)((function(n){"iframe.resize"!==n.context&&"player.js"!==n.context||e()})).destructor;return e(),function(){I.V6.off("resize_throttled",e),t()}}),[r,i]),c.createElement("div",{className:f(K)},c.createElement(N.x,{display:"block",xs:{display:"none"},sm:{display:"none"},md:{display:"none"},lg:{display:"none"}},c.createElement("aside",{className:f(Z),ref:a,style:{width:h?"".concat(h,"px"):void 0}},u&&c.createElement(ne,{creator:t,highlights:r,positionMap:u,yPosOffset:S,width:h,viewerEdge:x}))))})),re=c.memo(te),ie=(0,u.Ps)(Q(),B),ae=(0,u.Ps)(H()),oe=t(25415),le=t(46829),se=t(68356),ue=t.n(se),ce=t(75341),de=t(30570),pe=t(69677),fe=t(76532),Ve=t(30027),me=t(55099),ge=t(95760),he=t(19725),ve=t(54522),be=t(39378),ye=function(e){return{backgroundColor:"transparent",border:"1px solid",borderColor:e.baseColor.border.light,color:e.baseColor.border.darker,padding:"8px 10px 8px 10px",borderRadius:"20px",marginTop:"10px",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center",transition:"border-color .2s linear, transform .1s linear",minWidth:"4.9rem",":hover":{borderColor:e.baseColor.border.darker},":active":{transform:"scale(.98)"}}},ke=function(e){return{fill:e.baseColor.background.light,marginRight:"6px",width:"20px","> path":{fill:e.baseColor.border.darker}}},Ee=ue()({loader:function(){return t.e(56391).then(t.bind(t,80838))},modules:["src/components/post/text-to-speech/SpeechifyWidget"],webpack:function(){return[80838]},loading:function(e){var n=e.children;return c.createElement(c.Fragment,null,n)},render:(0,he.n)("SpeechifyWidget")}),Se=c.forwardRef((function(e,n){var t=e.postId,r=e.articleRef,i=e.isLockedPreviewOnly,a=(0,p.I)(),o=(0,ge.Av)(),l=(0,ce.SK)(),s=(0,fe.H)().value,u=!(null==s||!s.mediumMemberAt),d=(0,de.sK)().expandedPostId,f=(0,pe.Ij)().paragraphRefsMappers.paragraphTitlesRefsByStyleMap,V=(0,c.useState)(!0),m=y()(V,2),g=m[0],h=m[1];if(c.useEffect((function(){return o.event("experiment.eligible",{experimentId:"ec7b685b3f40"}),h(!0)}),[f,d]),!s)return null;var v=!u&&i;return c.createElement(N.x,{display:"flex",alignItems:"center",boxSizing:"border-box",marginBottom:"16px"},c.createElement(N.x,{flexGrow:"1"},c.createElement(Ve.P,{size:l?"full":"inset"},c.createElement("div",{ref:n},v?null:g?c.createElement(me.z,{onClick:function(){if(g){var e=new Audio;e.autoplay=!0,e.src="data:audio/mpeg;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaWdTb3VuZEJhbmsuY29tIC8gTGFTb25vdGhlcXVlLm9yZwBURU5DAAAAHQAAA1N3aXRjaCBQbHVzIMKpIE5DSCBTb2Z0d2FyZQBUSVQyAAAABgAAAzIyMzUAVFNTRQAAAA8AAANMYXZmNTcuODMuMTAwAAAAAAAAAAAAAAD/80DEAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsRbAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQMSkAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",h(!1)}},className:a(ye)},c.createElement(be.Z,{className:a(ke)}),c.createElement("span",null,"Listen to this story")):c.createElement(Ee,{postId:t,buttonStyle:ye,articleRef:r},c.createElement(me.z,{className:a(ye)},c.createElement(ve.Z,{className:a(ke)}),"0:00"))))))})),Pe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MaybeTextToSpeechQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"detectedLanguage"}},{kind:"Field",name:{kind:"Name",value:"wordCount"}}]}}]}}]},xe=function(e){var n,t,r,i,a=e.postId,o=e.articleRef,l=e.isLockedPreviewOnly,s=!!(0,fe.H)().value,u=(0,le.useQuery)(Pe,{variables:{postId:a}}),d=u.data,p=u.error,f=u.loading;if(!a||f||p)return null;var V=null!==(n=null==d||null===(t=d.post)||void 0===t?void 0:t.wordCount)&&void 0!==n?n:0;return"en"===(null!==(r=null==d||null===(i=d.post)||void 0===i?void 0:i.detectedLanguage)&&void 0!==r?r:"")&&V>20&&s?c.createElement(Se,{postId:a,articleRef:o,isLockedPreviewOnly:l}):null},we=t(53976),Ne=t(65441);function Ae(){var e=i()(["\n  fragment PostBody_privateNote on Note {\n    ...normalizedBodyModel_privateNote\n    ...PostBodySection_privateNote\n  }\n  ","\n  ","\n"]);return Ae=function(){return e},e}function Te(){var e=i()(["\n  fragment PostBody_creator on User {\n    ...PostNotesMarkers_creator\n  }\n  ","\n"]);return Te=function(){return e},e}function Ie(){var e=i()(["\n  fragment PostBody_highlight on Quote {\n    paragraphs {\n      id\n    }\n    ...normalizedBodyModel_highlight\n    ...PostBodySection_highlight\n    ...PostNotesMarkers_highlight\n  }\n  ","\n  ","\n  ","\n"]);return Ie=function(){return e},e}function Oe(){var e=i()(["\n  fragment PostBody_bodyModel on RichText {\n    sections {\n      name\n      startIndex\n      textLayout\n      imageLayout\n      backgroundImage {\n        id\n        originalHeight\n        originalWidth\n      }\n      videoLayout\n      backgroundVideo {\n        videoId\n        originalHeight\n        originalWidth\n        previewImageId\n      }\n    }\n    paragraphs {\n      id\n      ...PostBodySection_paragraph\n    }\n    ...normalizedBodyModel_richText\n  }\n  ","\n  ","\n"]);return Oe=function(){return e},e}var Re=c.forwardRef((function(e,n){var t,r,i=e.bodyModel,a=e.creator,l=e.highlights,u=e.isAuroraPostPageEnabled,f=e.privateNotes,V=e.postBodyInserts,m=e.richTextStyle,v=void 0===m?"FULL_PAGE":m,b=e.shouldHideHighlightAnnotations,y=void 0!==b&&b,k=e.isLockedPreviewOnly,E=void 0===k||k,S=e.postId,P=(0,p.I)(),x=c.createRef(),w=null===(t=c.useContext(d.u6).watchedBounds.get("byline"))||void 0===t||null===(r=t.ref)||void 0===r?void 0:r.current,N=w?w.offsetTop-48:100,A={position:"absolute",left:0,top:"calc(100vh + ".concat(N,"px)"),bottom:"calc(100vh + ".concat(100,"px)"),width:"10px",pointerEvents:"none"},T=(0,oe.Zx)().privateNoteSelection,I=c.useMemo((function(){return l&&T?[].concat(s()(l),[T]):l}),[l,T]),O=V?function(e){var n;return Object.keys(e).some((function(t){return!!e[t].find((function(e){return"BYLINE"===e.insertType}))&&(n=t,!0)})),n}(V):void 0,R=c.useMemo((function(){return(0,Ne.fj)(i,{bylineParagraphName:O,highlights:I,isAuroraPostPageEnabled:u,isPostPage:!0,privateNotes:f,richTextStyle:v})}),[i,I,f,v]),_=V&&V.first,C=(0,we.VB)({name:"enable_speechify_widget",placeholder:!1});return c.createElement("div",{ref:n},c.createElement("div",{ref:x},c.createElement(c.Fragment,null,c.createElement(d.TA,{name:"ghost-track",type:"ghost",className:P(A)}),"FULL_PAGE"===v&&l&&l.length>0&&!y&&c.createElement(re,{creator:a,highlights:s()(l),ref:n}),!!_&&_.map((function(e,n){return e.component?c.createElement("section",{key:"postBodyInsertFirst_".concat(n)},e.component):null})),S&&C?c.createElement(xe,{postId:S,articleRef:x,isLockedPreviewOnly:E}):null),R.map((function(e,n){if("HR"===e){var t,r,i=R[n-1],a=R[n+1],l="HR"!==i&&(null==i||null===(t=i.section)||void 0===t?void 0:t.backgroundImage),s="HR"!==a&&(null==a||null===(r=a.section)||void 0===r?void 0:r.backgroundImage);return l||s?null:c.createElement(g,{key:n})}return c.createElement(h.b,o()({key:e.section.name||n,postBodyInserts:V},e))}))))})),_e=(0,u.Ps)(Oe(),Ne.gd,v.Fm),Ce=(0,u.Ps)(Ie(),Ne.Cn,v.rz,ie),Be=(0,u.Ps)(Te(),ae),Fe=(0,u.Ps)(Ae(),Ne.EH,v.ik)},29577:(e,n,t)=>{"use strict";t.d(n,{L:()=>o});var r=t(68356),i=t.n(r),a=t(19725),o=i()({loader:function(){return Promise.all([t.e(84792),t.e(17084),t.e(19692),t.e(95145),t.e(63303),t.e(5850),t.e(54803),t.e(55402),t.e(99590),t.e(23913),t.e(97417)]).then(t.bind(t,55358))},modules:["src/components/responses/post/ThreadedResponsesSidebar"],webpack:function(){return[55358]},loading:function(){return null},render:(0,a.n)("ThreadedResponsesSidebar")})},73788:(e,n,t)=>{"use strict";t.d(n,{k:()=>c});var r=t(63038),i=t.n(r),a=t(67294),o=t(49486),l=t(29577),s=t(70586),u=t(92214),c=function(e){var n=e.children,t=e.post,r=e.preload,c=void 0===r||r,d=a.useState(void 0),p=i()(d,2),f=p[0],V=p[1],m=a.useCallback((function(e){return function(n){V(n),e()}}),[]);return a.createElement(s.E,{preload:c},(function(e){var r=e.showPreviousSidebar,i=e.hasLoaded,s=e.initialSidebarRender,c=e.isVisible,d=e.continueThisThreadPosts,p=e.openSidebar,g=e.cleanupSidebar;return a.createElement(o.Q.Provider,{value:{openSidebarToRespondToHighlight:m(p)}},!!t&&i&&a.createElement(l.L,{isResponsesSidebarVisible:c&&0===d.length,parentPost:t,inResponseToQuote:f,setInResponseToQuote:V,showPreviousSidebar:r,cleanupSidebar:g,initialSidebarRender:!!s.current}),!!t&&i&&d.map((function(e,n,i){var o=(0,u.iI)(n);return a.createElement(l.L,{key:t.id,isResponsesSidebarVisible:c&&n===i.length-1,parentPost:t,inResponseToQuote:f,setInResponseToQuote:V,continueThisThreadPost:e,continueThisThreadPostDepth:o,showPreviousSidebar:r,cleanupSidebar:g,initialSidebarRender:!!s.current})})),n)}))}},72393:(e,n,t)=>{"use strict";t.d(n,{f:()=>r});var r=t(67294).createContext({addContinueThisThreadSidebar:function(){return null},openSidebar:function(){return null},closeSidebar:function(){return null}})},70586:(e,n,t)=>{"use strict";t.d(n,{E:()=>m});var r=t(319),i=t.n(r),a=t(63038),o=t.n(a),l=t(38125),s=t.n(l),u=t(67294),c=t(29577),d=t(72393),p=t(77180),f=t(27108),V=t(8403),m=function(e){var n=e.preload,t=e.children,r=u.useState(!1),a=o()(r,2),l=a[0],m=a[1],g=(0,p.F)(),h=!!(0,V.Wd)("responsesOpen"),v=u.useState(!1),b=o()(v,2),y=b[0],k=b[1],E=u.useRef(!0),S=u.useRef(0),P=u.useState(!1),x=o()(P,2),w=x[0],N=x[1],A=u.useCallback((function(){return k(!0)}),[]),T=u.useState([]),I=o()(T,2),O=I[0],R=I[1],_=u.useCallback((function(e){E.current=!1,R([].concat(i()(O),[e]))}),[O]),C=u.useCallback((function(){R(s()(O))}),[O]),B=u.useCallback((function(){k(!1),R([]),E.current=!0}),[]);u.useEffect((function(){N(!0),k(h)}),[h]);var F=function(){window.innerWidth<g.breakpoints.md&&m(!0)};return u.useEffect((function(){return F(),f.V6.on("resize",F),function(){return f.V6.off("resize",F)}}),[]),u.useEffect((function(){var e,n,t=null===(e=window)||void 0===e||null===(n=e.document)||void 0===n?void 0:n.documentElement;return l&&null!=t&&t.style&&(y?(t.style.top="-".concat(S.current,"px"),S.current=t.scrollTop,t.style.overflow="hidden",t.style.position="fixed"):(t.style.overflow="",t.style.position="",t.style.top="",t.scrollTop=S.current)),function(){l&&null!=t&&t.style&&(t.style.overflow="",t.style.position="",t.style.top="",t.scrollTop=S.current)}}),[y]),u.useEffect((function(){n&&c.L.preload()}),[n]),u.createElement(d.f.Provider,{value:{addContinueThisThreadSidebar:_,openSidebar:A,closeSidebar:B}},t({showPreviousSidebar:C,hasLoaded:w,initialSidebarRender:E,isVisible:y,continueThisThreadPosts:O,openSidebar:A,cleanupSidebar:B}))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/32677.a4e57680.chunk.js.map